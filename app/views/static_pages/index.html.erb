<div class="max-w-5xl mx-auto w-full px-3">
  <%= render "shared/main_nav" %>
  <section>
    <!-- Welcome Hero with navigation -->
    <div class="flex flex-col-reverse md:flex-row justify-center items-start md:items-stretch gap-2 mt-4 mb-2">
      <%# 1. Removed src attribute and render initial content directly %>
      <turbo-frame id="info" class="flex flex-col justify-start items-start w-full md:w-3/4">
        <%= image_tag "RogueMediaLab-intro.png", 
                  alt: "Welcome to the lab", 
                  class: "border-2 border-gray-800 rounded-lg w-full lg:max-w-[700px] max-h-[525px] overflow-hidden" %>
      </turbo-frame>

      <div id="info-nav" class="hidden md:flex flex-col w-full md:w-1/4">
        <h2 class="text-3xl font-bold dark:text-milk-light text-base-dark">Info</h2>
        <hr class="my-4 w-full dark:border-white border-base-dark">

        <%# Use the home/welcome link to reset the frame %>
        <%= link_to "Welcome", info_welcome_path, class: "border dark:border-milk-light border-base-dark rounded-md p-2 w-full mb-4", data: { turbo_frame: "info" } %>
        <%= link_to "About Me", info_about_me_path, class: "border dark:border-milk-light border-base-dark rounded-md p-2 w-full mb-4", data: { turbo_frame: "info" } %>
        <%= link_to "Skills", skills_path, class: "border dark:border-milk-light border-base-dark rounded-md p-2 w-full mb-4", data: { turbo_frame: "info" } %>
        <%= link_to "Blog", blogs_path, class: "border dark:border-milk-light border-base-dark rounded-md p-2 w-full mb-4" %>
        <%= link_to "Projects", projects_path, class: "border dark:border-milk-light border-base-dark rounded-md p-2 w-full mb-4", data: { turbo_frame: "info" } %>

        <%# 2. Use proper path helpers for robust links %>
        <%= link_to "Contact", new_contact_path, class: "border dark:border-milk-light border-base-dark rounded-md p-2 w-full mb-4", data: { turbo_frame: "info" } %>
        <%= link_to "Erudition", info_erudition_path, class: "border dark:border-milk-light border-base-dark rounded-md p-2 w-full mb-4", data: { turbo_frame: "info" } %>
        <%= link_to "Code - GitHub", "https://github.com/Developer3027", class: "border dark:border-milk-light border-base-dark rounded-md p-2 w-full mb-4", target: "_blank" %>
      </div>
    </div>
    <!-- Featured projects -->
    <div class="my-6">
      <h2 class="text-3xl font-bold dark:text-milk-light text-base-dark">Featured</h2>
      <hr class="my-4 w-full dark:border-white border-base-dark">
        <div class="flex justify-between items-center flex-wrap w-full my-2">
          <% @small_projects.each do |project| %>
            <%= link_to project[:path] do %>
              <div class="flex flex-col justify-center items-center border border-gray-600 rounded-md w-full md:w-[230px] h-[140px] p-4 mb-2">
                <h2 class="font-semibold text-2xl mb-2 dark:text-milk-light text-base-dark"><%= project[:title] %></h2>
                <p class="text-xs w-full md:w-[212px] px-4"><%= project[:description] %></p>
              </div>
            <% end %>
          <% end %>
      </div>
    </div>
  </section>
</div>